<!-- Commit Start-->
<div class="magic-name" id="magic-name-commit">
    <i class="icon-check-empty icon-large"></i>Commit
</div>
<div class="magic-mirror" id="magic-mirror-commit">
    <div class="commit-box">
        <a href="javascript:void(0);" id="input-commit-button" class="button">Commit</a>
    </div>
</div>
<script type="text/javascript">
    iframe_register(function () {
        var data = null;
        var m = new Magic('commit-task', '{{wizardName}}', ___index___, function (magic, mana) {
            data = mana;
            if (!data) {
                magic.ready = false;
                var i = document.getElementById('magic-name-commit').getElementsByTagName('i')[0];
                i.classList.remove('icon-check');
                i.classList.add('icon-check-empty');
            }
        });
        Magician.practice(m);
        var input_install_button = document.getElementById('input-commit-button');
        input_install_button.addEventListener('click', function () {
            if (!data) {
                m.ready = false;
                var i = document.getElementById('magic-name-commit').getElementsByTagName('i')[0];
                i.classList.remove('icon-check');
                i.classList.add('icon-check-empty');
            }
            else {
                m.ready = true;
                var i = document.getElementById('magic-name-commit').getElementsByTagName('i')[0];
                i.classList.remove('icon-check-empty');
                i.classList.add('icon-check');
            }
            if (m.ready) {
                var d = JSON.stringify(data);
                alert(d);
                Toolkits.async_post("{{url}}", {}, d, "application/json");
            }
        });
    });
</script>
<!-- Commit End-->
